# Photo Recipe 项目更新日志

## 版本 v2.2 - 地面距离标识 - 2025年8月12日

### 新增功能：地面距离标识（0.5m～10m）

**功能描述：**
- 在地面（y=0）添加一组同心圆环（0.5m、1m、2m…10m）
- 每个圆环在 +X 方向放置一个半径标签（例如 `0.5m`、`1m`）
- 可通过UI控制显示/隐藏距离标识，调整步长（0.25m/0.5m/1.0m）和最大半径（5m/10m/15m）
- 距离标识归入 `rulerGroup`，挂载在 `helpersGroup` 下，受"显示辅助元素"开关控制
- 新增独立开关"显示距离标识"单独控制

**技术实现：**
1. **App.tsx 新增状态和控制UI**
   - 添加 `showRuler` (默认开), `rulerStep` (默认0.5), `rulerMax` (默认10) 状态
   - 在左侧面板"辅助/显示"区域添加控制选项

2. **ThreeStage.tsx 实现距离标识**
   - 创建 `rulerGroup` 并加入场景
   - 实现 `makeCircleLine` 函数绘制圆环
   - 实现 `makeTextSprite` 函数创建文本标签（使用Canvas生成纹理，面向相机）
   - 实现 `rebuildRuler` 函数根据步长和最大值重建距离标识
   - 在初始化时构建距离标识，并在属性变化时更新

**UI截图：**
（暂无，用户可自行运行查看）

**使用说明：**
1. 勾选"显示距离标识"即可在地面看到同心圆环和标签
2. 通过步长和最大值下拉菜单调整标识的密度和范围

**版本标识：**
- Git提交：待用户提交后生成

**时间：** 2025年8月12日 23:48 (UTC+9)

---

## 版本 v2.1 - GitHub Pages 部署配置 - 2025年1月8日 04:16

### 新增功能：GitHub Pages 自动部署

**部署配置详情：**
- 配置了 GitHub Pages 自动部署功能
- 支持通过 https://yangjizhou99.github.io/gptapp/ 访问项目
- 实现了完整的 CI/CD 部署流程

**技术实现：**

1. **Vite 配置优化**
   - 设置 `base: '/gptapp/'` 用于 GitHub Pages 项目页面
   - 配置 `outDir: 'docs'` 输出构建文件到 docs 文件夹
   - 确保资源路径在 GitHub Pages 环境下正确工作

2. **GitHub Actions 工作流**
   - 创建 `.github/workflows/deploy.yml` 自动部署工作流
   - 配置自动构建、测试和部署流程
   - 支持推送到 main 分支时自动触发部署

3. **部署方案**
   - 采用 docs 文件夹部署方案（更稳定可靠）
   - 构建产物直接输出到 docs/ 目录
   - GitHub Pages 直接从 docs 文件夹服务静态文件

**配置文件更新：**
- `vite.config.ts`: 添加 base 路径和输出目录配置
- `.github/workflows/deploy.yml`: 新增 GitHub Actions 部署工作流
- `docs/`: 新增构建输出目录

**使用说明：**
1. 在 GitHub 仓库设置中启用 Pages
2. 选择 "Deploy from a branch" -> "main" -> "/ docs"
3. 保存设置后即可通过 GitHub Pages URL 访问项目

**版本标识：**
- Git 提交：2b1f638 "feat: switch to docs folder deployment for GitHub Pages"
- 部署状态：已配置完成，等待用户启用 GitHub Pages

---

## 版本回滚 - 2025年1月8日 03:33

### 操作记录：回滚到任务开始前版本

**回滚原因：**
用户要求回滚到实现"点击预览⇄主视图互换"功能之前的版本

**回滚详情：**
- 从提交 cf8945b 回滚到 e645d5a
- 移除了所有视图切换相关功能
- 恢复到原始的ThreeStage组件和App组件
- 保持原有的基础功能：三段人像、相机控制、对准点设置等

**当前版本状态：**
- Git提交：e645d5a "Reverted transformation control module implementation"
- 功能：基础的3D场景编辑和预览功能
- 无视图切换功能

**回滚命令：**
```bash
git reset --hard e645d5a
git push --force
```

---

## 历史版本

### 版本 v2.0 - 基础功能
- 三段人像显示
- 相机控制系统
- 对准点设置
- 模板系统
- 导入导出功能
- 控制模式和辅助显示

---

更新时间：2025年1月8日 03:33 (UTC+9)
更新人员：AI助手
项目仓库：https://github.com/yangjizhou99/gptapp.git
